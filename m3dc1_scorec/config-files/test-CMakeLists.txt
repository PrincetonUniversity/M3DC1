function(util_exe_func exename srcname)
  add_executable(${exename} ${srcname})
  target_link_libraries(${exename} core)
  bob_export_target(${exename})
  bob_end_subdir()
endfunction(util_exe_func)

function(test_exe_func exename srcname)
  if(IS_TESTING)
    add_executable(${exename} ${srcname})
  else()
    add_executable(${exename} EXCLUDE_FROM_ALL ${srcname})
  endif()
  target_link_libraries(${exename} core)
endfunction(test_exe_func)

util_exe_func(check_smb check_smb.cc)
util_exe_func(collapse collapse.cc)
util_exe_func(split_smb split_smb.cc)
util_exe_func(write_topo write_topo.cc)

# send all the newly added utility executable targets
# back up to the parent (root) scope to be included
# in scorec-config.cmake
set(TARGETS ${TARGETS} PARENT_SCOPE)

# Add the nightly testing script, if needed
if(IS_TESTING)
  include(testing.cmake)
endif()

if(ENABLE_SIMMETRIX)
  #executables which call only Simmetrix functions
  include_directories(${PROJECT_BINARY_DIR}/gmi_sim)
endif()

bob_end_subdir()
