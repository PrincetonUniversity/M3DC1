#%Module1.0
##

## Required internal variables

set             name            m3dc1
set             version         devel
set             root            $env(M3DC1_CODE_DIR)

## List conflicting modules here

conflict $name

## List prerequisite modules here

set             fullname        M3D-C1
set             externalurl     http://w3.pppl.gov/~nferraro/m3dc1.html
set             description     "M3D-C1 is an extended-MHD code"

## Required for "module help ..."

proc ModulesHelp { } {
  global description externalurl
  puts stderr "Description - $description"
  puts stderr "Other Docs  - $externalurl"
}

## Required for "module display ..." and SWDB

module-whatis                   "$description"

## Software-specific settings exported to user environment

if { ! [ is-loaded gcc/12.2.0-x86_64 ] } {
  module load gcc/12.2.0-x86_64
}

module use /orcd/data/psfc/001/software/modulefiles/spack-admin
#module load openmpi-4.1.4-gcc-12.2.0-3r4zaih
#module load netcdf-c-4.9.2-gcc-12.2.0-kogljzt netcdf-fortran-4.6.0-gcc-12.2.0-cylyrw3
module load openmpi/4.1.4-pmi-cuda-ucx-x86_64
module load netcdf-c/4.9.0-x86_64
module load netcdf-fortran/4.6.0-x86_64

setenv          M3DC1_VERSION   $version
setenv          M3DC1_DIR       $root
setenv		M3DC1_ARCH	mit_gcc
setenv		M3DC1_MPIRUN	srun

prepend-path    PATH             $root/unstructured/_mit_gcc/bin
prepend-path    IDL_PATH         $root/unstructured/idl
