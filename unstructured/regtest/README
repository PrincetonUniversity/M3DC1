The regression tests here work by copying the "base" subdirectory to a
new subdirectory, running the code in the new directory, and comparing
the resulting C1ke file with that in the "base" subdirectory.

If you are adding or modifying a regression test, please see the
"Notes for Developers" section at the end of this README.


RUNNING
=======

To submit the regression tests run the following command:

./run <config>

where <config> is an optional keyword describing the particular
configuration you want to use.  New test subdirectories will be named
${M3DC1_VERSION}_<config>, and the batch script batchjob.<config>
(defined in the "base" directories) will be used to launch the jobs.
If <config> is not included, it defaults to $M3DC1_ARCH.


CHECKING RESULTS
================

To check the results of the regression tests, run the following
command:

./check <config>

where <config> has the same value supplied to the "run" script.  The
"check" script will indicate whether the tests have started or
finished.  If they have finished, it will compare the C1ke file with
those in the "base" directory.


CLEANING UP
===========

The test subdirectories can be deleted by running

./clean <config>


NOTES FOR DEVELOPERS
====================

Mesh files
~~~~~~~~~~

Since results depend sensitively on the discretization, mesh files
(*.smb) can be included in the repository.  However, these files can
be large, and should be stored using git-lfs.  To enable git-lfs in
your local directory, run "git lfs install".  .smb files can then be
added to the repository using the normal git commands (i.e. "git add
mesh.smb").  The .gitattributes file in this repository will ensure
that git-lfs is automatically used for .smb files.


Changing Results
~~~~~~~~~~~~~~~~

Sometimes due to a bugfix or other change to the code, the "correct"
C1ke output will change.  If this change is expected and understood,
the base/C1ke file can be overwritten with the "correct" C1ke output.
Whenever this happens, a note should be added to the CHANGELOG
explaining the cause of the change.